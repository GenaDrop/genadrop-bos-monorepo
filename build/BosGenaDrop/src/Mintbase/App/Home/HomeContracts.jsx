const handsSvg = (
  <svg
    width="40px"
    height="40px"
    viewBox="0 0 16 16"
    fill="currentColor"
    xmlns="http://www.w3.org/2000/svg"
    class="fill-current text-blue-300 dark:text-blue-100"
  >
    <path
      d="M8.00562 3.58602C8.03364 3.19799 8.16179 2.82386 8.37756 2.50014C8.59332 2.17643 8.88934 1.91419 9.23671 1.73902C9.58408 1.56386 9.97094 1.48175 10.3595 1.50072C10.7481 1.5197 11.1251 1.6391 11.4537 1.84727C11.4913 1.87185 11.5216 1.9061 11.5414 1.94642C11.5611 1.98674 11.5697 2.03164 11.5661 2.0764C11.5625 2.12116 11.5469 2.16413 11.521 2.2008C11.4951 2.23746 11.4598 2.26647 11.4187 2.28477C10.8474 2.54181 10.3625 2.95833 10.0221 3.48429C9.68172 4.01025 9.50044 4.62328 9.5 5.24977C9.5 5.32289 9.5 5.39602 9.5075 5.46789C9.51095 5.51332 9.50191 5.55883 9.48137 5.5995C9.46084 5.64017 9.42957 5.67445 9.39097 5.69864C9.35236 5.72283 9.30788 5.73602 9.26233 5.73677C9.21677 5.73752 9.17188 5.7258 9.1325 5.70289C8.76417 5.49221 8.46292 5.18166 8.26353 4.8071C8.06414 4.43253 7.97473 4.00922 8.00562 3.58602ZM15 10.0379C15.0009 10.3236 14.9217 10.6038 14.7715 10.8469C14.6213 11.0899 14.406 11.286 14.15 11.4129L14.1225 11.4254L11.6956 12.4591C11.6716 12.4697 11.6467 12.4781 11.6213 12.4841L7.62125 13.4841C7.58163 13.4943 7.54091 13.4996 7.5 13.4998H1C0.734784 13.4998 0.48043 13.3944 0.292893 13.2069C0.105357 13.0193 0 12.765 0 12.4998V9.99977C0 9.73455 0.105357 9.4802 0.292893 9.29266C0.48043 9.10512 0.734784 8.99977 1 8.99977H2.79312L4.20687 7.58539C4.39225 7.39919 4.61269 7.25156 4.85546 7.15104C5.09822 7.05052 5.3585 6.99911 5.62125 6.99977H8.75C9.01411 6.99974 9.2748 7.05949 9.51253 7.17454C9.75026 7.28959 9.95887 7.45696 10.1227 7.6641C10.2866 7.87124 10.4014 8.11278 10.4586 8.37061C10.5158 8.62845 10.514 8.89589 10.4531 9.15289L13.0681 8.55164C13.2958 8.49136 13.5342 8.48415 13.7651 8.53058C13.996 8.577 14.2131 8.67582 14.3998 8.81942C14.5864 8.96302 14.7376 9.14755 14.8417 9.35881C14.9457 9.57006 14.9999 9.80239 15 10.0379ZM14 10.0379C13.9999 9.95522 13.9808 9.87368 13.9441 9.79959C13.9074 9.72551 13.8542 9.66087 13.7885 9.6107C13.7227 9.56053 13.6464 9.52617 13.5652 9.51029C13.4841 9.49441 13.4004 9.49744 13.3206 9.51914L13.3013 9.52414L9.11375 10.4873C9.07702 10.4955 9.03951 10.4997 9.00187 10.4998H7C6.86739 10.4998 6.74021 10.4471 6.64645 10.3533C6.55268 10.2596 6.5 10.1324 6.5 9.99977C6.5 9.86716 6.55268 9.73998 6.64645 9.64621C6.74021 9.55245 6.86739 9.49977 7 9.49977H8.75C8.94891 9.49977 9.13968 9.42075 9.28033 9.2801C9.42098 9.13944 9.5 8.94868 9.5 8.74977C9.5 8.55086 9.42098 8.36009 9.28033 8.21944C9.13968 8.07879 8.94891 7.99977 8.75 7.99977H5.62125C5.48988 7.99935 5.35974 8.02505 5.23839 8.07537C5.11703 8.12569 5.0069 8.19963 4.91437 8.29289L3.5 9.70664V12.4998H7.4375L11.3394 11.5241L13.7144 10.5129C13.8008 10.4673 13.8731 10.399 13.9235 10.3153C13.9738 10.2315 14.0003 10.1356 14 10.0379ZM10.5 5.24977C10.5 5.69478 10.632 6.12979 10.8792 6.4998C11.1264 6.86981 11.4778 7.1582 11.889 7.3285C12.3001 7.49879 12.7525 7.54335 13.189 7.45653C13.6254 7.36972 14.0263 7.15543 14.341 6.84076C14.6557 6.52609 14.87 6.12518 14.9568 5.68872C15.0436 5.25226 14.999 4.79986 14.8287 4.38873C14.6584 3.9776 14.37 3.62619 14 3.37896C13.63 3.13173 13.195 2.99977 12.75 2.99977C12.1533 2.99977 11.581 3.23682 11.159 3.65878C10.7371 4.08073 10.5 4.65303 10.5 5.24977Z"
      fill="currentColor"
    ></path>
  </svg>
);

const boxSvg = (
  <svg
    width="40px"
    height="40px"
    viewBox="0 0 22 22"
    fill="currentColor"
    xmlns="http://www.w3.org/2000/svg"
    class="fill-current text-blue-300 dark:text-blue-100"
  >
    <path d="M20.24 0H7.92C7.45322 0 7.00556 0.185428 6.67549 0.515492C6.34543 0.845556 6.16 1.29322 6.16 1.76V6.16H1.76C1.29322 6.16 0.845556 6.34543 0.515492 6.67549C0.185428 7.00556 0 7.45322 0 7.92V20.24C0 20.4711 0.0455238 20.7 0.133972 20.9135C0.22242 21.1271 0.352061 21.3211 0.515492 21.4845C0.678923 21.6479 0.872944 21.7776 1.08648 21.866C1.30001 21.9545 1.52887 22 1.76 22H14.08C14.3111 22 14.54 21.9545 14.7535 21.866C14.9671 21.7776 15.1611 21.6479 15.3245 21.4845C15.4879 21.3211 15.6176 21.1271 15.706 20.9135C15.7945 20.7 15.84 20.4711 15.84 20.24V15.84H20.24C20.7068 15.84 21.1544 15.6546 21.4845 15.3245C21.8146 14.9944 22 14.5468 22 14.08V1.76C22 1.52887 21.9545 1.30001 21.866 1.08648C21.7776 0.872944 21.6479 0.678923 21.4845 0.515492C21.3211 0.352061 21.1271 0.22242 20.9135 0.133972C20.7 0.0455238 20.4711 0 20.24 0ZM14.08 20.24H1.76V7.92H6.16V14.08C6.16 14.5468 6.34543 14.9944 6.67549 15.3245C7.00556 15.6546 7.45322 15.84 7.92 15.84H14.08V20.24ZM20.24 14.08H7.92V1.76H20.24V14.08Z"></path>
  </svg>
);

const rightArrow = (
  <svg
    width="24px"
    height="24px"
    viewBox="0 0 24 24"
    fill="currentColor"
    xmlns="http://www.w3.org/2000/svg"
    class="fill-current text-white dark:text-black"
  >
    <g clip-path="url(#clip0_2025_39245)">
      <path
        d="M12.0001 4.00003L10.5901 5.41003L16.1701 11L4.00006 11L4.00006 13L16.1701 13L10.5801 18.58L12.0001 20L20.0001 12L12.0001 4.00003Z"
        fill="currentColor"
      ></path>
    </g>
    <defs>
      <clipPath id="clip0_2025_39245">
        <rect
          width="24"
          height="24"
          fill="white"
          transform="translate(24) rotate(90)"
        ></rect>
      </clipPath>
    </defs>
  </svg>
);

const planeIcon = (
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="35"
    height="35"
    fill="currentColor"
    class="bi bi-airplane-fill"
    viewBox="0 0 16 16"
  >
    <path d="M6.428 1.151C6.708.591 7.213 0 8 0s1.292.592 1.572 1.151C9.861 1.73 10 2.431 10 3v3.691l5.17 2.585a1.5 1.5 0 0 1 .83 1.342V12a.5.5 0 0 1-.582.493l-5.507-.918-.375 2.253 1.318 1.318A.5.5 0 0 1 10.5 16h-5a.5.5 0 0 1-.354-.854l1.319-1.318-.376-2.253-5.507.918A.5.5 0 0 1 0 12v-1.382a1.5 1.5 0 0 1 .83-1.342L6 6.691V3c0-.568.14-1.271.428-1.849" />
  </svg>
);

const walletSvg = (
  <svg
    width="40px"
    height="40px"
    viewBox="0 0 14 12"
    fill="currentColor"
    xmlns="http://www.w3.org/2000/svg"
    class="fill-current text-blue-300 dark:text-blue-100"
  >
    <path
      d="M8.86441 11.1794L6.26186 8.57688L6.96441 7.87433L8.86441 9.75383L12.6439 5.97433L13.3464 6.6974L8.86441 11.1794ZM1.66698 2.60257V4.73073H12.3336V2.60257H1.66698ZM0.666992 1.20513C0.666992 0.868377 0.783659 0.583333 1.01699 0.35C1.25033 0.116667 1.53537 0 1.87213 0H12.1285C12.4652 0 12.7503 0.116667 12.9836 0.35C13.217 0.583333 13.3336 0.868377 13.3336 1.20513V4.73073H12.0042L8.86441 7.8705L6.97466 5.98075L4.37853 8.57688L4.79136 8.99998V9.99997H1.87213C1.53537 9.99997 1.25033 9.8833 1.01699 9.64997C0.783659 9.41663 0.666992 9.13159 0.666992 8.79483V1.20513Z"
      fill="currentColor"
    ></path>
  </svg>
);

const HomeContracts = styled.div`
  padding: 20px;
  .nfts {
    height: max-content !important;
    min-height: 650px !important;
    display: flex;
    gap: 20px;
    width: 100%;
    flex-wrap: wrap;
  }
`;

const Gallery = styled.div`
  max-width: 1300px;
  height: 460px;
  display: flex;
  margin: 1rem auto;
  align-items: center;
  .arrow-l {
    rotate: 180deg;
  }
  .arrow-r,
  .arrow-l {
    cursor: pointer;
    border-radius: 50%;
    padding: 8px 10px 10px 10px;
    border: 1px solid black;
    background: black;
    svg {
      padding: 0;
      margin: 0;
    }
  }
  .slider-display {
    position: relative;
    width: 210rem;
    height: 456px;
    overflow: hidden;
    @media only screen and (max-width: 927px) {
      width: 32rem;
    }
    @media only screen and (max-width: 627px) {
      width: 20rem;
    }
  }
  .slider-track {
    transition: all 300ms ease;
    position: absolute;
    display: flex;
    gap: 2rem;
    justify-content: center;
    .nft-card {
      width: 15rem;
      height: 15rem;
      border-radius: 10px;
      overflow: hidden;
      img {
        transition: all 300ms ease-in-out;
      }
      :hover img {
        scale: 1.1;
      }
    }
  }
  @media (max-width: 500px) {
    top: 100%;
  }
`;

const CardsContainer = styled.div`
  display: grid;
  grid-template-columns: repeat(5, minmax(0, 1fr));
  gap: 40px;
  margin-top: 40px;
  width: 100%;
  .card {
    display: flex;
    align-items: center;
    justify-content: center;
    height: 239px;
    padding: 5px;
    background: transparent;
    border-radius: 4px;
    border: 1px dashed ${(props) => (props.isDarkModeOn ? "#f8f8f8" : "#000")};
    &:hover {
      background: ${(props) => (props.isDarkModeOn ? "#070C2B" : "white")};
    }
    i {
      width: 40px;
      height: 40px;
      color: #4e58a2;
    }
    svg {
      color: ${(props) => (props.isDarkModeOn ? "#c5d1fe" : "#4e58a2")};
    }
    a {
      text-decoration: none;
    }
    .button {
      border: 1px solid #9496a1;
      transition: 0.3s ease-in-out;
      color: #000;
      font-size: 14px;
      padding: 5px 15px;
      color: ${(props) => (props.isDarkModeOn ? "#fff" : "#000")};
      margin: 10px 0;
      border-radius: 4px;
      &:hover {
        background-color: rgba(59, 130, 246, 0.2);
        border-color: rgba(59, 130, 246, 0.2);
      }
    }
    .link {
      color: ${(props) => (props.isDarkModeOn ? "#c5d1ff" : "#4e58a2")};
      margin-top: 10px;
      padding: 5px 15px;
      border-radius: 4px;
      transition: 0.3s ease-in-out;
      border: 2px solid transparent;
      &:hover {
        border: 2px solid rgba(59, 130, 246, 0.5);
      }
    }
  }
  @media (max-width: 500px) {
    display: flex;
    flex-direction: column;
    flex-wrap: wrap;
  }
`;

const Contracts = styled.div`
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: space-between;
  margin-top: 80px;
  widthL 100%;
  .top {
    display: flex;
    justify-content: space-between;
    width: 100%;
    align-items: center;
    margin-bottom: 15px;
    h1 {
        color: ${(props) => (props.isDarkModeOn ? "#b2b5bd" : "#3f4353")};
        font-size: 14px;
        text-transform: uppercase;
        font-weight: bold;
    }
    p {
      color: ${(props) => (props.isDarkModeOn ? "#aab4df" : "#000")};
      cursor: pointer;
    }
  }
`;

const documentSvg = (
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="36"
    height="36"
    fill="currentColor"
    class="bi bi-file-earmark-fill"
    viewBox="0 0 16 16"
  >
    <path d="M4 0h5.293A1 1 0 0 1 10 .293L13.707 4a1 1 0 0 1 .293.707V14a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2m5.5 1.5v2a1 1 0 0 0 1 1h2z" />
  </svg>
);

const HomeContractsPage = ({ tabs, isDarkModeOn }) => {
  const [ownedNFts, setOwnedNFTs] = useState([]);
  const [page, setPage] = useState(1);
  const cardsData = [
    {
      icon: handsSvg,
      buttonLink:
        "https://wallet.mintbase.xyz/connect?transactions_data=%5B%7B%22receiverId%22%3A%220.drop.proxy.mintbase.near%22%2C%22actions%22%3A%5B%7B%22type%22%3A%22FunctionCall%22%2C%22params%22%3A%7B%22methodName%22%3A%22mint%22%2C%22args%22%3A%7B%22metadata%22%3A%22%7B%5C%22media%5C%22%3A%5C%22l_GYnLYzrm5_a4RDh0oVXLvAWR5LOwux7ByO_HHqAsc%5C%22%2C%5C%22creatorAddress%5C%22%3A%5C%22nate.near%5C%22%2C%5C%22title%5C%22%3A%5C%22%5C%22%2C%5C%22description%5C%22%3A%5C%22%5C%22%7D%22%2C%22nft_contract_id%22%3A%22drops.mintbase1.near%22%7D%2C%22gas%22%3A%22200000000000000%22%2C%22deposit%22%3A%2213500000000000000000000%22%7D%7D%5D%7D%5D&isDrop=true",
      buttonName: "Claim NFT",
      learnLink: "https://docs.mintbase.xyz/wallet/overview",
    },
    {
      icon: boxSvg,
      buttonLink: "https://wallet.mintbase.xyz/create-drop",
      buttonName: "Create Drop",
      learnLink: "https://docs.mintbase.xyz/wallet/overview",
    },
    {
      icon: walletSvg,
      buttonLink: "https://www.mintbase.xyz/launchpad/stripe-connection/0",
      buttonName: "Connect Stripe",
      learnLink: "https://docs.mintbase.xyz/market/stripe-connection",
    },
    {
      icon: planeIcon,
      buttonLink: "https://wallet.mintbase.xyz/smart-actions",
      buttonName: "Mint with AI",
      learnLink: "https://docs.mintbase.xyz/ai/getting-started",
    },
    {
      icon: documentSvg,
      buttonLink: "",
      buttonName: "Deploy NFT Contract",
      learnLink:
        "https://docs.mintbase.xyz/creator/creating-nfts/deploy-contract",
    },
  ];

  const fetchOwnedNfts = () => {
    asyncFetch(
      `https://api.mintbase.xyz/human/${context.accountId}/owned?offset=0&limit=16&orderBy=greatest(minted_timestamp,%20last_transfer_timestamp)%20desc%20nulls%20last&listedFilter=false`,
      {
        method: "GET",
        headers: {
          "mb-api-key": "omni-site",
          "Content-Type": "application/json",
          "x-hasura-role": "anonymous",
        },
      }
    ).then((data) => {
      if (data.body) {
        const nfts = JSON.parse(data.body);
        setOwnedNFTs(nfts.results);
      }
    });
  };

  useEffect(() => {
    fetchOwnedNfts();
  }, []);

  // const HandleUpSlide = () => {
  //   if (page < ownedNFts.length - 1) {
  //     setPage(page + 1);
  //   } else {
  //     setPage(0);
  //   }
  // };
  // const HandleDownSlide = () => {
  //   if (page > 0) {
  //     setPage(page - 1);
  //   } else {
  //     setPage(ownedNFts.length - 1);
  //   }
  // };

  return (
    <HomeContracts>
      <Contracts isDarkModeOn={isDarkModeOn}>
        <div className="top">
          <h1>Your Contracts</h1>
          <p role="button">View All</p>
        </div>
        <CardsContainer isDarkModeOn={isDarkModeOn}>
          {cardsData.map((data) => (
            <div className="card" key={data.buttonName}>
              {data.icon ? (
                data?.icon
              ) : (
                <i className="bi bi-airplane-fill icon"></i>
              )}
              <a className="button" href={data.buttonLink} target="_blank">
                {data.buttonName}
              </a>
              <a className="link" href={data.learnLink} target="_blank">
                Learn more
              </a>
            </div>
          ))}
        </CardsContainer>
      </Contracts>
      <Contracts isDarkModeOn={isDarkModeOn}>
        <div className="top">
          <h1>Owned NFTS</h1>
          <p>View All</p>
        </div>
      </Contracts>
      {/* <Gallery>
        <div onClick={HandleDownSlide} className="arrow-l">
          {rightArrow}
        </div>
        <div className="slider-display">
          <div
            className="slider-track"
            style={{
              transform: `translateX(-${7 * page}rem)`,
            }}
          > */}
      <div className="nfts">
        {ownedNFts.length
          ? ownedNFts
              ?.slice(0, 3)
              ?.map((data, index) => (
                <Widget
                  src="bos.genadrop.near/widget/Mintbase.NFT.Index"
                  props={{ data, isDarkModeOn }}
                  key={index}
                />
              ))
          : ""}
      </div>

      {/* </div>
        </div>
        <div onClick={HandleUpSlide} className="arrow-r">
          {rightArrow}
        </div>
      </Gallery> */}
    </HomeContracts>
  );
};

return (
  <HomeContractsPage isDarkModeOn={props.isDarkModeOn} tabs={props.tabs} />
);
